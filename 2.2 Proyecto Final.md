# Simulador de Adaptación Muscular con Optimización Matemática

## Tabla de Contenidos
1. [Fundamentos Matemáticos](#fundamentos-matemáticos)
2. [Implementación Numérica](#implementación-numérica)
3. [Análisis de Sensibilidad](#análisis-de-sensibilidad)
4. [Campo Vectorial](#campo-vectorial)
5. [Optimización con Descenso de Gradiente](#optimización-con-descenso-de-gradiente)
6. [Interfaz Interactiva](#interfaz-interactiva)
7. [Ejemplo de Simulación](#ejemplo-de-simulación)
8. [Limitaciones y Mejoras](#limitaciones-y-mejoras)

---

## Fundamentos Matemáticos

### Sistema de Ecuaciones Diferenciales

#### Masa Muscular $(M(t)$:
$$
\frac{dM}{dt} = \underbrace{\alpha P E}_{\text{Síntesis}} - \underbrace{\beta \frac{Gl}{M + 1}}_{\text{Corrosión}} + \underbrace{\gamma \tanh\left(\frac{C}{5}\right)}_{\text{Hidratación}}

$$
- **Términos**:
  - $\alpha P E$: Ganancia por proteína y entrenamiento $\alpha = 0.02$
  - $-\beta \frac{Gl}{M + 1}:$ Pérdida por glucosa $\beta = 0.005$
  - $\gamma \tanh(C/5)$: Hidratación por creatina $\gamma = 0.01$

#### Grasa Corporal (\(G(t)\)):
$$
\frac{dG}{dt} = \underbrace{\delta (Gl - 4E)}_{\text{Almacenaje}} - \underbrace{\epsilon E M}_{\text{Quema}}
$$

- **Términos**:
  -$\delta (Gl - 4E)$: Almacenaje de grasa $\delta = 0.0015$
  - $\epsilon E M$: Quema por músculo $\epsilon = 0.003$

---

## Implementación Numérica

### Resolución con ODEINT
```python
from scipy.integrate import odeint

def modelo(y, t, P, C, Gl, E):
    M, G = y
    dMdt = alpha * P * E - beta * (Gl/(M + 1)) + gamma * np.tanh(C/5)
    dGdt = delta * (Gl - 4*E) - epsilon * E * M
    return [dMdt, dGdt]

sol = odeint(modelo, y0, t, args=(P, C, Gl, E))
```

### Visualización 3D
```python
fig = plt.figure(figsize=(10,6))
ax = fig.add_subplot(111, projection='3d')
ax.plot(t, sol[:, 0], sol[:, 1], 'b-o')
ax.set_xlabel('Días'); ax.set_ylabel('Músculo (kg)'); ax.set_zlabel('Grasa (kg)')
```
---
## Análisis de Sensibilidad

### Derivadas Parciales

$$
∂∂P(dMdt)=0.02
E∂P∂​(dtdM​)=0.02
E∂∂E(dMdt)=0.02P∂E∂​(dtdM​)=0.02P∂∂Gl(dGdt)=0.0015∂Gl∂​(dtdG​)=0.0015
$$

---

## Campo Vectorial

### Cálculo de Tendencias

python

Copy

X, Y = np.meshgrid(np.linspace(60, 70, 10), np.linspace(15, 25, 10))
U = alpha*P*E - beta*(Gl/(X + 1)) + gamma*np.tanh(C/5)  # dM/dt
V = delta*(Gl - 4*E) - epsilon*E*X                     # dG/dt

plt.quiver(X, Y, U, V, scale=0.5, color='r')

---

## Optimización con Descenso de Gradiente

### Función de Coste

Coste=−dMdt+λdGdtCoste=−dtdM​+λdtdG​

### Algoritmo

1. Inicializar P,Gl,EP,Gl,E
    
2. Calcular gradientes:
    
    ∇P=−0.02E,∇Gl=0.005M+1+0.0015λ,∇E=−0.02P+λ(−0.006−0.003M)∇P​=−0.02E,∇Gl​=M+10.005​+0.0015λ,∇E​=−0.02P+λ(−0.006−0.003M)
3. Actualizar parámetros:
    
    Pnuevo=Pviejo−η∇PPnuevo​=Pviejo​−η∇P​
4. Aplicar restricciones: P∈[1,3]P∈[1,3], E∈[0,1]E∈[0,1]
    

---

## Interfaz Interactiva

### Componentes

python

Copy

from matplotlib.widgets import Slider, Button

# Sliders
slider_P = Slider(ax=ax_P, label='Proteína', valmin=1.0, valmax=3.0, valinit=2.2)
slider_P.on_changed(update)

# Botón de Reset
reset_ax = plt.axes([0.8, 0.02, 0.1, 0.04])
reset_button = Button(reset_ax, 'Reset')

### Funcionamiento

- **Actualización en Tiempo Real**: Movimiento de sliders → Recalculo de EDOs → Gráficos actualizados
    
- **Layout Responsive**: GridSpec para organizar 3 gráficos en una ventana
    

---

## Ejemplo de Simulación

### Condiciones Iniciales

|Parámetro|Valor|
|---|---|
|M0M0​|65 kg|
|G0G0​|20 kg|
|PP|2.2 g/kg|
|EE|0.7|

### Resultados a 30 Días

M=65+∫030(0.0308−0.0227+0.0076) dt≈66.2 kgM=65+∫030​(0.0308−0.0227+0.0076)dt≈66.2 kgG=20+∫030(0.4458−0.1365) dt≈29.3 kgG=20+∫030​(0.4458−0.1365)dt≈29.3 kg

---

## Limitaciones y Mejoras

### Limitaciones Actuales

1. No considera variaciones circadianas (sueño)
    
2. Modelo lineal simplificado para la quema de grasa
    

### Extensiones Futuras

1. **Variables Adicionales**:
    
    dSdt=Estreˊs (cortisol)−RecuperacioˊndtdS​=Estreˊs (cortisol)−Recuperacioˊn
2. **Calibración Automática**:
    
    python
    
    Copy
    
    from sklearn.linear_model import LinearRegression
    model.fit(X_train, y_train)  # Datos reales de usuarios
    




**Nota**: Ejecutar con `python -i Muscle2.py` para modo interactivo.  
**Dependencias**: `numpy`, `scipy`, `matplotlib>=3.5.0`



1. Explicación Matemática Simplificada (Agus)
📝 Para modelar este comportamiento usamos dos ecuaciones diferenciales:

📌 La primera representa el cambio en la masa muscular:
$$
𝑑
𝑀
𝑑
𝑡
=
𝛼
𝑃
𝐸
−
𝛽
𝐺
𝑙
𝑀
+
1
+
𝛾
tanh
⁡
(
𝐶
5
)
dt
dM
​
 =αPE−β 
M+1
Gl
​
 +γtanh( 
5
C
​
 )$$
- **𝑑𝑀/𝑑𝑡**: Representa la tasa de cambio de la masa muscular (M) con respecto al tiempo (t). En otras palabras, cuánto cambia tu masa muscular por unidad de tiempo.
- **𝛼𝑃𝐸**: Este término simula el efecto de la proteína (P) y el ejercicio (E) en el crecimiento muscular.
    - 𝛼 es un factor que determina la eficiencia con la que la proteína y el ejercicio se convierten en músculo.
    - A mayor proteína y ejercicio, mayor crecimiento muscular (en teoría).
- **𝛽(𝐺𝑙/𝑀+1)**: Este término representa la pérdida de masa muscular debido a la glucosa (Gl).
    - 𝛽 es un factor que determina cuánto afecta la glucosa a la pérdida muscular.
    - A mayor glucosa y menor masa muscular, mayor pérdida muscular.
- **𝛾 tanh(𝐶/5)**: Este término моделирует el efecto de la creatina (C) en el crecimiento muscular.
    - 𝛾 es un factor que determina cuánto contribuye la creatina al crecimiento muscular.
    - La función tanh (tangente hiperbólica) representa que el efecto de la creatina tiene un límite y se estabiliza con el tiempo.

📌 Y la segunda representa el cambio en la grasa corporal:
$$
𝑑
𝐺
𝑑
𝑡
=
𝛿
(
𝐺
𝑙
−
4
𝐸
)
−
𝜀
𝐸
𝑀
dt
dG
​
 =δ(Gl−4E)−εEM$$
- **𝑑𝐺/𝑑𝑡**: Representa la tasa de cambio de la grasa corporal (G) con respecto al tiempo (t).
- **𝛿(𝐺𝑙−4𝐸)**: Este término моделирует el efecto de la glucosa (Gl) y el ejercicio (E) en la acumulación de grasa.
    - 𝛿 es un factor que determina cuánto afecta la glucosa y el ejercicio a la acumulación de grasa.
    - A mayor glucosa y menor ejercicio, mayor acumulación de grasa.
- **𝜀𝐸𝑀**: Este término representa la quema de grasa debido al ejercicio (E) y la masa muscular (M).
    - 𝜀 es un factor que determina cuánta grasa se quema durante el ejercicio.
    - A mayor ejercicio y masa muscular, mayor quema de grasa.
💡 En términos simples:

Si comes más proteínas y entrenas, aumentas la masa muscular.
Si consumes mucha glucosa sin entrenar, acumulas más grasa.
La creatina ayuda al crecimiento muscular, pero su efecto no es infinito, sino que se estabiliza.
👨‍🔬 Gracias a estas ecuaciones podemos hacer predicciones y analizar cómo ciertos hábitos afectan la composición corporal a lo largo del tiempo.

📊 5. Resultados y Optimización (Agus)
🔎 Usamos optimización numérica para encontrar combinaciones ideales de dieta y ejercicio. Aplicamos técnicas de descenso de gradiente para ajustar valores y minimizar la grasa mientras maximizamos el músculo.

📈 Algunas de nuestras conclusiones fueron:
✅ El entrenamiento regular y un buen consumo de proteínas favorecen el crecimiento muscular.
✅ Un exceso de glucosa sin actividad física puede hacer que el cuerpo acumule más grasa.
✅ La creatina tiene un efecto positivo, pero no infinito.
✅ Se pueden usar estos modelos para diseñar estrategias personalizadas de nutrición y ejercicio.

🎯 6. Conclusión y Cierre (Agus)
🗣 En conclusión, este proyecto nos permitió aplicar matemáticas avanzadas y programación para entender mejor la relación entre nutrición, ejercicio y composición corporal.

🎥 Esta simulación puede ser útil para entrenadores, nutricionistas o cualquier persona interesada en mejorar su salud con datos basados en ciencia.

🙌 Esperamos que les haya gustado nuestro proyecto. ¡Gracias por su atención!